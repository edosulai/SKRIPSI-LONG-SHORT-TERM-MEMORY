{% extends 'layouts/app.html' %}
{% load proyeksi_tags %}

{% block header %}
<div class="flex">
  <h2 class="font-semibold text-xl text-light-800 dark:text-dark-50 leading-tight">{{title}}</h2>

  <div class="space-x-4 -my-px ml-10 flex">
    <a href="{% url "proyeksi" target="baru" %}" class="rounded block px-4 py-2 text-sm leading-5 text-light-700 dark:text-dark-100 hover:bg-light-100 dark:hover:bg-dark-700 focus:outline-none focus:bg-light-100 dark:focus:bg-dark-700 transition duration-150 ease-in-out">Buat Proyeksi</a>
  </div>
</div>
{% endblock header %}

{% block main %}

<div class="py-12">
  <div class="max-w-7xl mx-auto">
    <div class="bg-light-white dark:bg-dark-900 overflow-hidden shadow-sm sm:rounded-lg">

      <div class="flex flex-col">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
          <div class="py-2 align-middle inline-block min-w-full">
            <div class="shadow overflow-hidden sm:rounded-lg">

              <div class="container mx-auto p-10 bg-light-white dark:bg-dark-900 shadow-lg">
                <div class="mb-16" id="prediction-result">
                  <h3 class="text-light-700 dark:text-dark-100 text-2xl font-medium mb-10">Hasil Proyeksi Data</h3>

                  <div class="flex justify-between">
                    <div class="w-4/12 mr-5">
                      <table class="text-xs min-w-full divide-y divide-light-200 dark:divide-dark-600">
                        <thead class="bg-light-50 dark:bg-dark-800">
                          <tr>
                            <td scope="col" class="px-4 py-1 text-left text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider">
                              Hyperparameter
                            </td>
                            <td scope="col" class="px-4 py-1 text-left text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider">
                              Value
                            </td>
                          </tr>
                        </thead>
                        <tbody>
                          {% for form in proyeksi_form %}
                          <tr>
                            <td class="px-4 py-1 text-wrap">
                              <div class="text-xs text-light-900 dark:text-dark-white">{{form.label}}</div>
                            </td>
                            <td class="px-4 py-1 text-wrap">
                              <div class="text-xs text-light-900 dark:text-dark-white proyeksi-form" id="{{form.id_for_label}}">{{form.value}}</div>
                            </td>
                          </tr>
                          {% endfor %}
                          {% if id_riwayat %}
                            <div class="hidden proyeksi-form" id="id_riwayat">{{id_riwayat}}</div>
                          {% endif %}
                        </tbody>
                      </table>
                    </div>
                    <div class="w-8/12 ml-5">
                      <h4 class="text-light-700 dark:text-dark-100 font-medium mb-2">Mulai Proyeksi...</h4>
                      <pre class="overflow-auto h-72 text-sm"><code class="language-html">[[terminal]]</code></pre>
                    </div>
                  </div>
                </div>

                <div class="mb-16">
                  <h3 class="text-light-700 dark:text-dark-100 text-2xl font-medium mb-10">Grafik Hasil Proyeksi Data</h3>

                  <canvas id="predict-chart" width="400" height="200"></canvas>
                </div>

                <div class="mb-16">
                  <h3 class="text-light-700 dark:text-dark-100 text-2xl font-medium mb-10">Tabel Keterangan Grafik Hasil
                    Proyeksi Data
                  </h3>

                  <div class="flex">
                    <div class="w-full">
                      {% with proyeksi_form.feature_training.value|split:"," as feature_training %}
                      <table id="history" class="text-xs min-w-full divide-y divide-light-200 dark:divide-dark-600">
                        <thead class="bg-light-50 dark:bg-dark-800">
                          <tr>
                            <td colspan="{{ feature_training|length|add:"+1" }}" scope="col" class="px-6 py-3 text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider text-center">
                              Tabel Data History</td>
                          </tr>
                          <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider">
                              tanggal
                            </th>
                            {% for training in feature_training %}
                              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-light-500 dark:text-dark-300 uppercase tracking-wider">
                                {{training}}
                              </th>
                            {% endfor %}
                            </tr>
                          </thead>
                          <tbody></tbody>
                        </table>
                      {% endwith %}
                    </div>

                    <div class="w-auto">
                      <table id="proyeksi" class="text-xs min-w-full divide-y divide-light-200 dark:divide-dark-600">
                        <thead class="bg-light-50 dark:bg-dark-800">
                          <tr>
                            <td colspan="{% if proyeksi_form.feature_predict.value == 'rr' %}3{% else %}2{% endif %}" scope="col" class="px-6 py-3 text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider text-center">
                              Tabel Data Prediksi</td>
                          </tr>
                          <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-light-500 dark:text-dark-300 capitalize tracking-wider">
                              tanggal
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-light-500 dark:text-dark-300 uppercase tracking-wider">
                              {{proyeksi_form.feature_predict.value}}
                            </th>
                            {% if proyeksi_form.feature_predict.value == 'rr' %}
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-light-500 dark:text-dark-300 uppercase tracking-wider">
                              Intensitas
                            </th>
                            {% endif %}
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                  </div>

                </div>

                <div class="mb-16 flex w-full">
                  <div class="w-6/12 mr-5">
                    <h4 class="text-light-700 dark:text-dark-100 text-2xl font-medium mb-10">Grafik Nilai Error Setiap Epoch</h4>
                    <canvas id="error-chart" width="200" height="100"></canvas>
                  </div>
                  <div class="w-6/12 ml-5">
                    <h4 class="text-light-700 dark:text-dark-100 text-2xl font-medium mb-10">Grafik Nilai Error Evaluasi Test</h4>
                    <canvas id="eva-chart" width="200" height="100"></canvas>
                  </div>
                </div>

                <div id="penegas" class="px-10 text-center italic">
                  <p>
                    ......
                  </p>
                  <p>
                    ......
                  </p>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>

</script>

{% endblock main %}